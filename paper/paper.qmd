---
title: "My title"
subtitle: "My subtitle if needed"
author: Tam Ly
thanks: "Code and data are available at: [https://github.com/atn-ly/beyonce](https://github.com/atn-ly/beyonce)"
date: today
date-format: long
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
format: pdf
number-sections: true
bibliography: references.bib
toc: true
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(rstanarm)
library(knitr)
library(here)
library(ggplot2)
library(arrow)
library(scales)
library(modelsummary)
library(marginaleffects)

#Read in data
beyonce_cleaned = read_parquet(
  file = here("data/analysis_data/beyonce_cleaned.parquet"),
  show_col_types = FALSE
)

#Read in model
beyonce_pois <- readRDS(file = here::here("models/beyonce_pois.rds"))
beyonce_nbinom <- readRDS(file = here::here("models/beyonce_nbinom.rds"))

```


# Introduction



# Data {#sec-data}

## Source

## Methodology

## Variables

## Measurement



# Model {#sec-model}

The goal of our modeling strategy is to predict the number of Spotify streams for a BeyoncÃ© song based on the number of weeks it spent on the *Billboard Hot 100*. We used a negative binomial regression model in a Bayesian framework. Negative binomial regression is a type of generalized linear model that is useful for modeling count data.

## Model set-up

The model that we are interested in is:

\begin{align} 
y_i|\mu_i,r &\sim \mbox{NegBinom}(\mu_i, r) \\
\mbox{log}(\mu_i) &= \alpha + \beta \times \mbox{Number of weeks}_i \\
\alpha &\sim \mbox{Normal}(0, 2.5) \\
\beta &\sim \mbox{Normal}(0, 2.5) \\
\end{align}

Where:

* $y_i$ is the outcome variable, representing the number of Spotify streams for song $i$, 
* $\mu_i$ is a parameter for the negative binomial distribution, representing the probability of success in a single trial,
* $r$ is a parameter for the negative binomial distribution, representing the number of successes,
* $\mbox{Number of weeks}_i$ is the predictor variable, representing the number of weeks spent on the Billboard Hot 100 for song $i$,
* $\alpha$ is a parameter, representing the intercept with a default prior probability distribution that is Normal with a mean of 0 and standard deviation of 2.5,
* $\beta$ is a parameter, representing the slope coefficient with a default prior probability distribution that is Normal with a mean of 0 and standard deviation of 2.5.

## Model justification

```{r}
pp_check(beyonce_pois) +
  theme(legend.position = "bottom")

pp_check(beyonce_nbinom) +
  theme(legend.position = "bottom")
```

# Results {#sec-results}



# Discussion {#sec-discussion}

## First discussion point

## Second discussion point

## Third discussion point

## Weaknesses and next steps



\newpage

\appendix

# Appendix {-}

# Model details {#sec-model-details}

## Posterior predictive check

## Diagnostics



\newpage

# References
